function $parcel$export(e,t,a,r){Object.defineProperty(e,t,{get:a,set:r,enumerable:!0,configurable:!0})}function $cd80bf694d0631b1$export$71511d61b312f219(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $62cc9eefa616c344$var$_defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $62cc9eefa616c344$export$71511d61b312f219(e,t,a){return t&&$62cc9eefa616c344$var$_defineProperties(e.prototype,t),a&&$62cc9eefa616c344$var$_defineProperties(e,a),e}var $54e9de874e7cf259$export$468fbe6771f1699e=function e(t,a,r,o){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.action=t,this.receiverName=a,this.message=r,this.bridgeData=o},$e27faf65630ebc9a$export$e12b769011d096b4=function e(t,a,r){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.bridgeVersion=t,this.endpoints={analytics:a,deviceInfo:r}},$f12b5d7f8ad4b8dc$export$33b0bc6879c27206=function e(t,a){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.staging=t,this.production=a},$a527415fb53b3e91$export$eed022e50baffed5={Analytics:{Staging:"evt-eu.staging.eu1.yaco.klarna.net",Production:"not-reallly-evt.klarna.com"},DeviceData:{Staging:"devicedata-staging.klarna",Production:"devicedata-production.klarna"}},$b4efb1694e6b9d0a$export$a96b0bbdbd70b734=(e=>(e.ReceiverAdded="ReceiverAdded",e.ReceiverRemoved="ReceiverRemoved",e.MessagePosted="MessagePosted",e.EndpointsReported="EndpointsReported",e.MessageBridgeWillStart="MessageBridgeWillStart",e.MessageBridgeAlreadyRunning="MessageBridgeAlreadyRunning",e))({});function $263e4d1ab7ddd93a$export$71511d61b312f219(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function $23cfc4b678f7be21$export$71511d61b312f219(e){if(Array.isArray(e))return $263e4d1ab7ddd93a$export$71511d61b312f219(e)}function $563f113198c86e6e$export$71511d61b312f219(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function $5eb0f827a401b1b3$export$71511d61b312f219(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $6c065eef3d36ea62$export$71511d61b312f219(e,t){var a;if(e)return"string"==typeof e?$263e4d1ab7ddd93a$export$71511d61b312f219(e,t):"Map"===(a="Object"===(a=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?$263e4d1ab7ddd93a$export$71511d61b312f219(e,t):void 0}function $7b042ade928b542b$export$71511d61b312f219(e){return $23cfc4b678f7be21$export$71511d61b312f219(e)||$563f113198c86e6e$export$71511d61b312f219(e)||$6c065eef3d36ea62$export$71511d61b312f219(e)||$5eb0f827a401b1b3$export$71511d61b312f219()}var $0f3b9fcdcc260be5$var$_class,$dc2b35112bcce9e2$export$243e62d78d3b544d=(e=>(e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.None=4]="None",e))({}),$dc2b35112bcce9e2$export$efa9a398d6368992=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.level=4,this.delegate=null}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"debug",value:function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];try{0===this.level&&(null!=this.delegate&&this.delegate.logDebug(this._stringifyParams(a)),(e=console).log.apply(e,$7b042ade928b542b$export$71511d61b312f219(a)))}catch(e){}}},{key:"info",value:function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];try{this.level<=1&&(null!=this.delegate&&this.delegate.logDebug(this._stringifyParams(a)),(e=console).info.apply(e,$7b042ade928b542b$export$71511d61b312f219(a)))}catch(e){}}},{key:"warn",value:function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];try{this.level<=2&&(null!=this.delegate&&this.delegate.logDebug(this._stringifyParams(a)),(e=console).warn.apply(e,$7b042ade928b542b$export$71511d61b312f219(a)))}catch(e){}}},{key:"error",value:function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];try{this.level<=3&&(null!=this.delegate&&this.delegate.logError(this._stringifyParams(a)),(e=console).error.apply(e,$7b042ade928b542b$export$71511d61b312f219(a)))}catch(e){}}},{key:"_stringifyParams",value:function(e){try{return JSON.stringify(e,null,2)}catch(e){return"Couldn't stringify logging params."}}}]),e})(),$86c5e230eba4f632$export$d2ca453b913dcdea=($dc2b35112bcce9e2$export$efa9a398d6368992.default=new $dc2b35112bcce9e2$export$efa9a398d6368992,(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,null,[{key:"getHandshakeResponseParams",value:function(e,t){if(e.handshakeResponseParamsMap)return e.handshakeResponseParamsMap[t]}},{key:"getFirstHandshakeResponseParams",value:function(e){if(e.handshakeResponseParamsMap){var t=Object.keys(e.handshakeResponseParamsMap);if(0<t.length)return e.handshakeResponseParamsMap[t[0]]}}},{key:"compareVersion",value:function(e,t){for(var a=e.split("-")[0].replace("v","").split(".").map(function(e){e=parseInt(e,10);return isNaN(e)?0:e});a.length<3;)a.push(0);for(var r=t.split("-")[0].replace("v","").split(".").map(function(e){e=parseInt(e,10);return isNaN(e)?0:e});r.length<3;)r.push(0);return a[0]>r[0]?1:a[0]<r[0]?-1:a[1]>r[1]?1:a[1]<r[1]?-1:a[2]>r[2]?1:a[2]<r[2]?-1:0}},{key:"createUUIDv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"randomizeInteger",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e5;return Math.floor(Math.random()*e)}},{key:"replaceBridge",value:function(e,a){$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Replacing old bridge",e);var t=e.receivers,r=e.queuedMessages,o=e.eventListeners,n=e.handshakeResponseParamsMap,d=e.queuedKlarnaPaymentsMessages;if(a.notifyEvent({name:"WillReplaceNativeHook",payload:{oldMessageBridgeVersion:e.version,newMessageBridgeVersion:a.version,receivers:t.toString(),queuedMessages:r.toString(),nativeReady:e.nativeReady.toString()}}),(window.__KlarnaNativeHook=a).notifyEvent({name:"ReplacedNativeHook",payload:{oldMessageBridgeVersion:e.version,newMessageBridgeVersion:a.version}}),e.destroy&&e.destroy(),null!=o&&o.forEach(function(e){return a.addEventListener(e)}),null!=n)if(n.forEach)n.forEach(function(e,t){a.handshakeResponseParamsMap[t]=e});else for(var c in n)a.handshakeResponseParamsMap[c]=n[c];r.forEach(function(e){return a.queuedMessages.push(e)}),t.forEach(function(e){return a.addReceiver(e.name,e.callback)}),void 0!==d&&d.forEach(function(e){return a.queuedKlarnaPaymentsMessages.push(e)}),e.nativeReady&&a.setNativeReady(),$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Replaced old bridge",a)}}]),e})()),$e46f7c82eed16cd3$export$5e8778959ee066ba="klarna-base-64-utf8::",$e46f7c82eed16cd3$export$3ab5d4b363e83ecc="v1.5.3-3126bd052fe",$e46f7c82eed16cd3$export$6f861d09917a31b9="https://eu.klarnaevt.com",$ab11a08eff1af618$export$3b418aac0e066580=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"overrideDefaults",value:function(){var a,e;null!=window.defaultAtob&&null!=window.sdkAtob?$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Already installed custom atob(). Skipping."):(a=window.atob,window.atob=e=function(t){if(0!==t.indexOf($e46f7c82eed16cd3$export$5e8778959ee066ba))return a(t);t=t.substr($e46f7c82eed16cd3$export$5e8778959ee066ba.length);try{return decodeURIComponent(atob(t).split("").map(function(e){return null==(e=e.charCodeAt(0).toString(16).match(/.{1,2}/g))?void 0:e.map(function(e){return"%"+("00"+e).slice(-2)}).join("")}).join(""))}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("atob-custom",{"src-string":t,msg:e.toString()});try{return a(t)}catch(e){throw $dc2b35112bcce9e2$export$efa9a398d6368992.default.error("atob-default",{"src-string":t,msg:e.toString()}),e}}},window.defaultAtob=a,window.sdkAtob=e)}}]),e})(),$3e97667694aebf08$export$9d82dedbeb797f41=(e=>(e.fullscreenReplaceWebView="fullscreenReplaceWebView",e.fullscreenMoveWebView="fullscreenMoveWebView",e.fullscreenReplaceOverlay="fullscreenReplaceOverlay",e.fullscreenRestoreWebView="fullscreenRestoreWebView",e.handshakeResponse="handshakeResponse",e.actionToComponent="actionToComponent",e))({}),$057585bf838d51b0$export$9b0bca74892433ef=[$3e97667694aebf08$export$9d82dedbeb797f41.fullscreenReplaceWebView,$3e97667694aebf08$export$9d82dedbeb797f41.fullscreenMoveWebView,$3e97667694aebf08$export$9d82dedbeb797f41.fullscreenReplaceOverlay,$3e97667694aebf08$export$9d82dedbeb797f41.fullscreenRestoreWebView],$f5914d5fa710f736$export$544cf229e56c299f=[{merchantAppName:"boohooMAN",osName:"iOS"},{merchantAppName:"Nasty Gal",osName:"iOS"},{merchantAppName:"MISSPAP",osName:"iOS"},{merchantAppName:"boohoo",osName:"iOS"},{merchantAppName:"PLT UAT",osName:"iOS"}],$fa9011cb1dfb6667$export$caf75cbffb0ca40=(e=>(e.Root="Root",e.Frame="Frame",e))({}),$ec5a25b0ccdbabd5$export$d6ff711ee8724594=(e=>(e.RegisterWindow="RegisterWindow",e.PostReceiverMessage="PostReceiverMessage",e.PostNativeMessage="PostNativeMessage",e.IsNativeReadyRequest="IsNativeReadyRequest",e.IsNativeReadyResponse="IsNativeReadyResponse",e.IsSdkWebViewRequest="IsSdkWebViewRequest",e.IsSdkWebViewResponse="IsSdkWebViewResponse",e))({}),$c3ff21775b3c8166$export$ea3d1b96f570ebdd=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"handleMessage",value:function(t,a,r){try{var e;if(r.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.PostNativeMessage)return t.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?(e=r.data,a.messageController.postEventMessageToNative(a,e),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Relayed Native Message")):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Frame Message Bridge received invalid message",r),!0}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("NativeMessageDelegate handle message failed",t,a,r,e)}return!1}}]),e})(),$d4bd0b16daddf41f$export$813991340c5a5201=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"handleMessage",value:function(t,a,r){try{if(r.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.PostReceiverMessage){var e=r.data;try{a.messageController.processMessage(a,e),a.messageController.postMessageToComponents(a,e)}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("Relayed Receiver Message failed to post message via bridge",r,a,e)}return $dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Relayed Receiver Message to Message Bridge",r,a),!0}}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("ReceiverMessageDelegate handle message failed",t,a,r,e)}return!1}}]),e})(),$24815a6cb6024ef5$export$a9cf52565e7ce5db=function e(t){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.isNativeReady=t},$d1ea647a48aee95f$export$23508ec371339b15=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"handleMessage",value:function(t,a,r){try{var e,o,n;if(r.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyRequest)return t.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?(e=new $24815a6cb6024ef5$export$a9cf52565e7ce5db(a.nativeReady),o=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyResponse,e,r.messageId),t.postMessage(o),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Processed IsNativeReadyRequest",r,o)):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Frame Message Bridge received invalid message",r),!0;if(r.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyResponse)return t.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame?((n=r.data).isNativeReady&&a.setNativeReady(),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Processed IsNativeReadyResponseData",r,n,this)):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Root Message Bridge received invalid message",r),!0}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("NativeReadyMessageDelegate handle message failed",t,a,r,e)}return!1}}]),e})(),$976c9715c78f6b69$export$15f24e2438b5a10d=function e(t){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.isSdkWebView=t},$7fb1a5c018ced9fc$export$85b2f1afd23a3b1c=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"handleMessage",value:function(t,a,r){try{var e,o,n;if(r.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewRequest)return t.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?(e=new $976c9715c78f6b69$export$15f24e2438b5a10d(a.nativeController.isSdkWebView(a)),o=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewResponse,e,r.messageId),t.postMessage(o),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Processed IsSdkWebViewRequest",r,o)):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Frame Message Bridge received invalid message",r),!0;if(r.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewResponse)return t.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame?(n=r.data,a.nativeController.setIsSdkWebView(n.isSdkWebView),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Processed IsSdkWebViewResponse",r,n)):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Root Message Bridge received invalid message",r),!0}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("IsSdkWebViewMessageDelegate handle message failed",t,a,r,e)}return!1}}]),e})(),$12d919e3cb0be9dc$export$d011177d13fe20f1=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"handleMessage",value:function(e,t,a){try{var r;if(a.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.RegisterWindow)return e.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?(r=a.sourceWindowId,e.windows.push(r),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindow registered",r)):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Frame Message Bridge received invalid message",a),!0}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindow failed to register",a,e)}return!1}}]),e})(),$e0ffd6e27a79933d$export$8a7b6697b2b3d2e1=(()=>{function n(){$cd80bf694d0631b1$export$71511d61b312f219(this,n)}return $62cc9eefa616c344$export$71511d61b312f219(n,null,[{key:"postMessageToNestedWindows",value:function(e,t){try{for(var a=t.frames,r=0;r<a.length;r++){var o=a[r];n.postMessageToWindow(e,o);try{this.postMessageToNestedWindows(e,o)}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowMessage post failed to deep nested window",e)}}}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowMessage post failed to nested window",e)}}},{key:"postMessageToWindow",value:function(t,e){try{$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowMessage Will Send",t,window.__KlarnaNativeHook);e.postMessage(t,"*"),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowMessage Sent",t,window.__KlarnaNativeHook,"*")}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowMessage Failed to Send",e,t,window.__KlarnaNativeHook)}}}]),n})(),$4056916c3e7cc48b$export$8697e044b6ceac7e=(()=>{function a(e){var t=this;$cd80bf694d0631b1$export$71511d61b312f219(this,a),this.windows=[],this.delegates=[new $12d919e3cb0be9dc$export$d011177d13fe20f1,new $7fb1a5c018ced9fc$export$85b2f1afd23a3b1c,new $d1ea647a48aee95f$export$23508ec371339b15,new $c3ff21775b3c8166$export$ea3d1b96f570ebdd,new $d4bd0b16daddf41f$export$813991340c5a5201],this.responseCallbacks={},this.listener=function(e){try{t.receivedMessage(e)}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowMessage listener caught exception",e)}},this.windowId=a.getWindowId(),this.messageBridge=e,window.self!==window.top?this.mode=$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame:this.mode=$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root}return $62cc9eefa616c344$export$71511d61b312f219(a,[{key:"postMessage",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowMessage Will Send",t,window.__KlarnaNativeHook),a&&(this.responseCallbacks[t.messageId]=a);var e=t.encode();switch(this.mode){case $fa9011cb1dfb6667$export$caf75cbffb0ca40.Root:$e0ffd6e27a79933d$export$8a7b6697b2b3d2e1.postMessageToNestedWindows(e,window.self);break;case $fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame:$e0ffd6e27a79933d$export$8a7b6697b2b3d2e1.postMessageToWindow(e,window.top)}}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowMessage post has failed",t,a,window.__KlarnaNativeHook,e)}}},{key:"register",value:function(e){var t;this.messageBridge!=e&&(t=this.messageBridge,this.messageBridge=e,$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowController message bridge replaced",e,t)),window.addEventListener("message",this.listener,{once:!1,capture:!1,passive:!1}),this.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame&&this.postMessage(new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.RegisterWindow,null)),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowController Registered")}},{key:"unregister",value:function(){this.messageBridge=null,window.removeEventListener("message",this.listener,{capture:!1}),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowController Un-Registered")}},{key:"receivedMessage",value:function(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("MessageEvent Received",e),e.source===window.self?$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("MessageEvent received from self"):(e=$3f8d71218c98a45f$export$137d9274eb4bdc8d.decode(e.data),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowMessage Received",e,window.__KlarnaNativeHook),this.receivedCrossWindowMessage(e),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowMessage Processed",e,window.__KlarnaNativeHook))}},{key:"receivedCrossWindowMessage",value:function(e){if(this.validateCrossWindowMessage(e)){var t=this.messageBridge;if(null==t)$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowController null message bridge");else{var a=!0,r=!1,o=void 0;if(!this.callResponseCallback(e)){try{for(var n,d=this.delegates[Symbol.iterator]();!(a=(n=d.next()).done);a=!0)if(n.value.handleMessage(this,t,e))return}catch(e){r=!0,o=e}finally{try{a||null==d.return||d.return()}finally{if(r)throw o}}$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowController message could not be handled",this,t,e)}}}else $dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowController received invalid message",e)}},{key:"validateCrossWindowMessage",value:function(e){return null!=e.messageId&&null!=e.messageId&&0<e.messageId.length&&null!=e.action&&null!=e.action&&0<e.action.length}},{key:"callResponseCallback",value:function(e){var t=this.responseCallbacks[e.messageId];return!!t&&t(e)}}],[{key:"getWindowId",value:function(){var e=window.__KlarnaNativeHookWindowId;return e||(e=$86c5e230eba4f632$export$d2ca453b913dcdea.createUUIDv4(),window.__KlarnaNativeHookWindowId=e)}}]),a})(),$3f8d71218c98a45f$export$137d9274eb4bdc8d=(()=>{function n(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:$86c5e230eba4f632$export$d2ca453b913dcdea.createUUIDv4(),r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:window.origin,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:$4056916c3e7cc48b$export$8697e044b6ceac7e.getWindowId();$cd80bf694d0631b1$export$71511d61b312f219(this,n),this.messageId=a,this.sourceWindowId=o,this.sourceOrigin=r,this.action=e,this.data=t}return $62cc9eefa616c344$export$71511d61b312f219(n,[{key:"encode",value:function(){return JSON.stringify(this)}}],[{key:"decode",value:function(e){return JSON.parse(e)}}]),n})(),$85771519b3f11699$export$15f59c3f623e5e81=(()=>{function a(){$cd80bf694d0631b1$export$71511d61b312f219(this,a),this.delayedMessages=[],this.sendDelayedMessagesWithInterval()}return $62cc9eefa616c344$export$71511d61b312f219(a,[{key:"sendMessage",value:function(e,t){e.nativeReady?a.shouldDelayMessage(e,t)?this.delayedMessages.push(new $85771519b3f11699$var$MessageBridgeNativeHookMessage(e,t)):this.postEventMessageToNative(e,a.createBridgeMessage(t)):e.queuedMessages.push(t)}},{key:"postEventMessageToNative",value:function(e,t){e.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame?e.crossWindowController.postMessage(new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.PostNativeMessage,t)):null!=(e=e.nativeController.getNativeMessageHandler())&&(e.postMessage(JSON.stringify(t)),$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Native Notified for Message",t,e))}},{key:"sendDelayedMessagesWithInterval",value:function(){var t=this;window.setInterval(function(){var e=t.delayedMessages.shift();null!=e&&null!=e.message&&t.postEventMessageToNative(e.messageBridge,a.createBridgeMessage(e.message))},200)}}],[{key:"createBridgeMessage",value:function(e){return new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.MessagePosted,null,e,null)}},{key:"shouldDelayMessage",value:function(t,a){if(-1!==$057585bf838d51b0$export$9b0bca74892433ef.indexOf(a.action)){t=$86c5e230eba4f632$export$d2ca453b913dcdea.getHandshakeResponseParams(t,a.sender);if(t){var e=t.osName,r=t.merchantAppName,o=!0,a=!1,t=void 0;try{for(var n,d=$f5914d5fa710f736$export$544cf229e56c299f[Symbol.iterator]();!(o=(n=d.next()).done);o=!0){var c=n.value;if(e===c.osName&&r===c.merchantAppName)return!0}}catch(e){a=!0,t=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw t}}}}return!1}}]),a})(),$85771519b3f11699$var$MessageBridgeNativeHookMessage=function e(t,a){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.messageBridge=t,this.message=a},$39d6456d60f7b2a5$export$c8a7d7e37b742a82=(e=>(e.KlarnaPayments="KlarnaPayments",e.KlarnaPaymentsWrapper="KlarnaPaymentsWrapper",e))({}),$0f3b9fcdcc260be5$export$a002182e51710d39=function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)},$9524e81dfe28183b$export$2cdde459a873087f=($0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName=(($0f3b9fcdcc260be5$var$_class=function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}).Native="Native",$0f3b9fcdcc260be5$var$_class),(()=>{function c(){$cd80bf694d0631b1$export$71511d61b312f219(this,c)}return $62cc9eefa616c344$export$71511d61b312f219(c,[{key:"releaseQueuedMessagesIfReady",value:function(e,t){if(t.sender===$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native&&t.receiver===$39d6456d60f7b2a5$export$c8a7d7e37b742a82.KlarnaPayments&&t.action===$3e97667694aebf08$export$9d82dedbeb797f41.handshakeResponse&&c.isKlarnaPaymentsReady(e)&&0<e.queuedKlarnaPaymentsMessages.length){$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("KlarnaPayments received handshake response, de-queuing messages.");var a=!0,t=!1,r=void 0;try{for(var o,n=e.queuedKlarnaPaymentsMessages[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){var d=o.value;this.sendMessage(e,d),$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Message De-queued",d)}}catch(e){t=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(t)throw r}}return e.queuedKlarnaPaymentsMessages=[],!0}return!1}},{key:"sendMessage",value:function(e,t){c.queueMessageIfNeeded(e,t)||(this.postMessageToComponents(e,t),e.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root&&e.crossWindowController.postMessage(new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.PostReceiverMessage,t)),this.releaseQueuedMessagesIfReady(e,t))}},{key:"postMessageToComponents",value:function(e,t){var a=!0,r=!1,o=void 0;try{for(var n,d=e.receivers[Symbol.iterator]();!(a=(n=d.next()).done);a=!0){var c=n.value;c.name!==t.receiver&&"*"!==t.receiver||(c.callback(t),$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Receiver Notified for Message",t,c))}}catch(e){r=!0,o=e}finally{try{a||null==d.return||d.return()}finally{if(r)throw o}}}}],[{key:"isKlarnaPaymentsReady",value:function(e){e=$86c5e230eba4f632$export$d2ca453b913dcdea.getHandshakeResponseParams(e,$39d6456d60f7b2a5$export$c8a7d7e37b742a82.KlarnaPayments);return null!=e}},{key:"queueMessageIfNeeded",value:function(e,t){return t.sender===$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native&&t.receiver===$39d6456d60f7b2a5$export$c8a7d7e37b742a82.KlarnaPaymentsWrapper&&t.action!==$3e97667694aebf08$export$9d82dedbeb797f41.handshakeResponse&&!c.isKlarnaPaymentsReady(e)&&(e.queuedKlarnaPaymentsMessages.push(t),$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Message Queued",t),!0)}}]),c})()),$4814da207725bbf9$export$b11de1d3f90d3095=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){"handhakeResponse"===t.action&&(t.action="handshakeResponse")}}]),e})(),$703d4353b2e97418$export$8121b940eecf6dfc=[{osName:"iOS",nativeVersion:"2.0.26"},{osName:"iOS",nativeVersion:"2.0.27"},{osName:"iOS",nativeVersion:"2.0.28"},{osName:"android",nativeVersion:"2.0.26"},{osName:"android",nativeVersion:"2.0.27"},{osName:"android",nativeVersion:"2.0.28"},{osName:"android",nativeVersion:"2.0.29"}],$ef3b0819d68510c9$export$9e75f50bdaecb36d=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){if("handshakeResponse"===t.action)try{var a=t.params.osName,r=t.params.nativeVersion,o=!0,n=!1,d=void 0;try{for(var c,s=$703d4353b2e97418$export$8121b940eecf6dfc[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var i=c.value;if(a===i.osName&&r===i.nativeVersion){var f=t.params.productOptions;if(void 0!==f&&"undefined"!==f&&null!=f){var $=JSON.parse(f);if(null!=$&&null!=$.klarnaInitData)try{var b=JSON.parse($.klarnaInitData);$.klarnaInitData=b,t.params.productOptions=JSON.stringify($)}catch(e){var l="Error parsing klarnaInitData parameter inside productOptions: ";try{l+=JSON.stringify(e)}catch(e){}finally{$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("rewrite-productOptions",{msg:l})}}}}}}catch(e){n=!0,d=e}finally{try{o||null==s.return||s.return()}finally{if(n)throw d}}}catch(e){n="Error parsing productOptions parameter: ";try{n+=JSON.stringify(e)}catch(e){}finally{$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("rewrite-productOptions",{msg:n})}}}}]),e})(),$3a048628b2890696$export$eed1627e80a5b594=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){if("setExperiments"===t.action){try{var a;void 0!==t.params.experiments&&"undefined"!==t.params.experiments&&null!=t.params.experiments&&(a=t.params.experiments,$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("rewrite-experiments-info",{msg:"Experiments JSON received: "+a}),"string"!=typeof a)&&(t.params.experiments=JSON.stringify(a))}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("rewrite-experiments",{msg:"Error stringifying experiments parameter sent from KP: "+JSON.stringify(e)})}try{if(void 0!==t.params.experiments&&"undefined"!==t.params.experiments&&null!=t.params.experiments){var r=t.params.experiments;if("string"==typeof r){var o,n=JSON.parse(r),d=[];for(o in n){var c=n[o];null!=c.variate&&void 0!==c.variate||(c.variate=""),d.push(c)}t.params.experiments=JSON.stringify(d)}}}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("rewrite-experiments-variates",{msg:"Error adding missing variate parameter in experiments sent from KP: "+JSON.stringify(e)})}}}}]),e})(),$ecbd5ca65160a7bb$export$b385821f0f78b939=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){"handshake"===t.action&&"KlarnaPaymentsWrapper"===t.sender&&window.__WrapperMessageController&&window.__WrapperMessageController._extractBase64&&(window.__WrapperMessageController._extractBase64=function(e,t,a){if(null==e.params[a]||"null"===e.params[a])return null;try{var r=e.params[a],o=atob(r);return JSON.parse(o)}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("extract-b64",{msg:"Error extracting b64 with custom atob() "+JSON.stringify(e)})}})}}]),e})(),$20b9286aec418fd6$export$d2210066b6438afd=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){if("actionToComponent"===t.action)try{var a;"undefined"!==t.params.sessionData&&null!=t.params.sessionData&&("null"===t.params.sessionData?delete t.params.sessionData:(a=t.params.sessionData,t.params.sessionData=$e46f7c82eed16cd3$export$5e8778959ee066ba+a.replace(/\n/g,"").replace(/-/g,"+").replace(/_/g,"/")))}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("re-format-session-data",{msg:"Error reformatting session data: "+JSON.stringify(e)})}}}]),e})(),$7fa6dffb869bcbcd$export$c7c9b199d5b7287c=(()=>{function a(){$cd80bf694d0631b1$export$71511d61b312f219(this,a)}return $62cc9eefa616c344$export$71511d61b312f219(a,[{key:"processMessage",value:function(e,t){"fullscreenShow"===t.action&&"android"===(null==(e=a.getHandshakeResponseParams(e,t))?void 0:e.osName)&&(t.params.canScroll="true")}}],[{key:"getHandshakeResponseParams",value:function(e,t){t=t.receiver===$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native?t.sender:t.receiver;return $86c5e230eba4f632$export$d2ca453b913dcdea.getHandshakeResponseParams(e,t)}}]),a})(),$c8630f9c56e73faf$export$c19720cc6ee85749=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(t,e){if(e.action===$3e97667694aebf08$export$9d82dedbeb797f41.handshakeResponse)try{t.handshakeResponseParamsMap[e.receiver]=e.params,$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Cached handshake",e.receiver,e.params)}catch(e){t="Error caching handshake response params: ";try{t+=JSON.stringify(e)}catch(e){}finally{$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("cache-handshakeResponseParams",{msg:t})}}}}]),e})(),$e2f3c9749fb45b3b$export$b71885c9ed9a7f3e={handshake:{responseAction:"handshakeResponse",timeoutInterval:1e3}},$bee0aad476183259$export$79dd02ead672e882=(()=>{function r(e,t,a){$cd80bf694d0631b1$export$71511d61b312f219(this,r),this.name=e,this.level=t,this.payload=a}return $62cc9eefa616c344$export$71511d61b312f219(r,[{key:"withPayload",value:function(e){return new r(this.name,this.level,e).build()}},{key:"build",value:function(){return{name:this.name,level:this.level,payload:this.payload}}}]),r})(),$d1833f90152cec72$export$276c87da55ac41e1=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=2]="INFO",e[e.ERROR=4]="ERROR",e))({}),$913e5e170f2ef076$export$9575b9f845a31cb=function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)},$624bb67c5638d266$export$86c9c54cd78967a3=($913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseInTime=new $bee0aad476183259$export$79dd02ead672e882("message_response_in_time",$d1833f90152cec72$export$276c87da55ac41e1.INFO),$913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseTimeout=new $bee0aad476183259$export$79dd02ead672e882("message_response_timeout",$d1833f90152cec72$export$276c87da55ac41e1.ERROR),$913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseValid=new $bee0aad476183259$export$79dd02ead672e882("message_response_valid",$d1833f90152cec72$export$276c87da55ac41e1.INFO),$913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseInvalid=new $bee0aad476183259$export$79dd02ead672e882("message_response_invalid",$d1833f90152cec72$export$276c87da55ac41e1.ERROR),function e(t){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.action=t.action,this.sender=t.sender,this.receiver=t.receiver,this.messageId=t.messageId}),$7dd74269339ff428$export$1f3054e84aa43db=(()=>{function t(e){$cd80bf694d0631b1$export$71511d61b312f219(this,t),this.observedMessages={},this.observedMessagesTimeouts={},this.dependencyContainer=e}return $62cc9eefa616c344$export$71511d61b312f219(t,[{key:"processMessage",value:function(e,t){var a=this.messageResponseTimeout(t);void 0!==a?this.startTimeoutForMessage(t,a):void 0!==(a=this.responseToObservedMessage(t))?this.processObservedMessage(a,t):this.dependencyContainer.logger.debug("Message is not being observed")}},{key:"startTimeoutForMessage",value:function(t,e){var a=this,r=t.messageId,e=(this.observedMessages[r]=t,setTimeout(function(){var e=a.observedMessages[t.messageId];void 0!==e&&(e={message:new $624bb67c5638d266$export$86c9c54cd78967a3(e)},a.dependencyContainer.analyticsController.logEvent($913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseTimeout.withPayload(e)))},e));this.observedMessagesTimeouts[r]=e}},{key:"processObservedMessage",value:function(e,t){var a=e.messageId,e={message:new $624bb67c5638d266$export$86c9c54cd78967a3(e),responseMessage:new $624bb67c5638d266$export$86c9c54cd78967a3(t)};delete this.observedMessages[a],this.clearTimeoutForMessage(a),this.dependencyContainer.analyticsController.logEvent($913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseInTime.withPayload(e))}},{key:"clearTimeoutForMessage",value:function(e){var t=this.observedMessagesTimeouts[e];void 0!==t&&(clearTimeout(t),delete this.observedMessagesTimeouts[e])}},{key:"messageResponseTimeout",value:function(e){e=$e2f3c9749fb45b3b$export$b71885c9ed9a7f3e[e.action];return null==e?void 0:e.timeoutInterval}},{key:"responseToObservedMessage",value:function(e){return this.observedMessages[e.messageId]}}]),t})(),$410c5ad4959c6c66$export$8ff363454ccde046=(()=>{function t(e){$cd80bf694d0631b1$export$71511d61b312f219(this,t),this.observedMessages={},this.dependencyContainer=e}return $62cc9eefa616c344$export$71511d61b312f219(t,[{key:"processMessage",value:function(e,t){var a,r;void 0!==$e2f3c9749fb45b3b$export$b71885c9ed9a7f3e[t.action]?this.observedMessages[t.messageId]=t:void 0!==(a=this.observedMessages[t.messageId])&&(r=null==(r=$e2f3c9749fb45b3b$export$b71885c9ed9a7f3e[a.action])?void 0:r.responseAction,t.action!==r?this.dependencyContainer.analyticsController.logEvent($913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseInvalid.withPayload({message:new $624bb67c5638d266$export$86c9c54cd78967a3(a),responseMessage:new $624bb67c5638d266$export$86c9c54cd78967a3(t)})):this.dependencyContainer.analyticsController.logEvent($913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseValid.withPayload({message:new $624bb67c5638d266$export$86c9c54cd78967a3(a),responseMessage:new $624bb67c5638d266$export$86c9c54cd78967a3(t)})),delete this.observedMessages[t.messageId])}}]),t})(),$85625f7385c30624$var$ExperimentType=(e=>(e.CardScanning="in-app-sdk-card-scanning",e.InternalBrowser="in-app-sdk-new-internal-browser",e))($85625f7385c30624$var$ExperimentType||{}),$85625f7385c30624$var$ExperimentVariate=(e=>(e.CardScanningEnable="card-scanning-enable",e.InternalBrowserEnable="new-internal-browser-enable",e))($85625f7385c30624$var$ExperimentVariate||{}),$85625f7385c30624$export$6ca93f9fa6e2bc8c=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.experimentConfigurations=[{reference:"in-app-sdk-card-scanning",variate:"card-scanning-enable",iosVersion:"2.6.26",androidVersion:"2.6.26"},{reference:"in-app-sdk-new-internal-browser",variate:"new-internal-browser-enable",iosVersion:"2.6.26",androidVersion:"2.6.26"}],this.configured=!1}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(a,e){var r,o,n,d=this;this.configured||(r=e.receiver===$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native?e.sender:e.receiver,(e=$86c5e230eba4f632$export$d2ca453b913dcdea.getHandshakeResponseParams(a,r))&&(o=e.nativeVersion)&&(this.configured=!0,n="android"===e.osName,this.experimentConfigurations.forEach(function(e){var t=n?e.androidVersion:e.iosVersion;$86c5e230eba4f632$export$d2ca453b913dcdea.compareVersion(o,t)<0&&(t=d.createSetExperimentMessage(r,e),a.postMessage(t))})))}},{key:"createSetExperimentMessage",value:function(e,t){return{action:"setExperiments",sender:e,receiver:$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native,messageId:$86c5e230eba4f632$export$d2ca453b913dcdea.createUUIDv4(),params:{experiments:JSON.stringify([this.createExperimentPayload(t)])}}}},{key:"createExperimentPayload",value:function(e){return{reference:e.reference,variate:e.variate}}}]),e})(),$5dbc9bfda17936fb$var$NativeMobileSdkTheme=(e=>(e.LIGHT="light",e.DARK="dark",e.AUTO="auto",e.AUTOMATIC="automatic",e))($5dbc9bfda17936fb$var$NativeMobileSdkTheme||{}),$5dbc9bfda17936fb$var$MobileSdkTheme=(e=>(e.LIGHT="light",e.DARK="dark",e.SYSTEM="system",e))($5dbc9bfda17936fb$var$MobileSdkTheme||{}),$5dbc9bfda17936fb$export$56219e84366399f9=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){window.klarnaMobileSdkTheme&&"string"==typeof window.klarnaMobileSdkTheme&&0<window.klarnaMobileSdkTheme.length||t.action===$3e97667694aebf08$export$9d82dedbeb797f41.handshakeResponse&&t.receiver===$39d6456d60f7b2a5$export$c8a7d7e37b742a82.KlarnaPaymentsWrapper&&(t=t.params)&&(t=t.theme)&&("light"===(t=t.toLowerCase())?window.klarnaMobileSdkTheme="light":"dark"===t?window.klarnaMobileSdkTheme="dark":"auto"!==t&&"automatic"!==t||(window.klarnaMobileSdkTheme="system"))}}]),e})(),$998a675d5a5ea461$export$bf20daeb966b534e=(e=>(e.PARAM_FEATURES="features",e.PARAM_PLATFORM="osName",e.PARAM_APP_PACKAGE_NAME="merchantAppID",e.PARAM_APP_RETURN_URL="merchantReturnURL",e.PARAM_SDK_VERSION="nativeVersion",e.FEATURE_AUTHENTICATION_BROWSER="authentication-browser",e))({}),$bae8cfe2c5e1f4ac$export$2c17cb06bc53e24=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,null,[{key:"parse",value:function(t){if(null!=t)try{return JSON.parse(t)}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("Failed to parse value: ".concat(t),e)}else $dc2b35112bcce9e2$export$efa9a398d6368992.default.error("Failed to parse null value")}}]),e})(),$eb00602d8ed812b0$export$2dffd0b5373a4389=(e=>(e.ANDROID="android",e.IOS="ios",e))({}),$1f46c59d7e48c823$export$a0e918d51eb9fb6=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,null,[{key:"getPlatform",value:function(e){e=e.params[$998a675d5a5ea461$export$bf20daeb966b534e.PARAM_PLATFORM];if(null!=e&&0<e.length){e=e.toLowerCase();if(e===$eb00602d8ed812b0$export$2dffd0b5373a4389.ANDROID)return $eb00602d8ed812b0$export$2dffd0b5373a4389.ANDROID;if(e===$eb00602d8ed812b0$export$2dffd0b5373a4389.IOS)return $eb00602d8ed812b0$export$2dffd0b5373a4389.IOS}}},{key:"getFeatures",value:function(e){var e=e.params[$998a675d5a5ea461$export$bf20daeb966b534e.PARAM_FEATURES],t=void 0;return null!=e&&(Array.isArray(e)?t=e:"string"==typeof e&&(t=$bae8cfe2c5e1f4ac$export$2c17cb06bc53e24.parse(e))),t}},{key:"compareSdkVersion",value:function(e,t){e=this.getSdkVersion(e);if(null!=e&&0<e.length)return $86c5e230eba4f632$export$d2ca453b913dcdea.compareVersion(e,t)}},{key:"getAppPackageName",value:function(e){e=e.params[$998a675d5a5ea461$export$bf20daeb966b534e.PARAM_APP_PACKAGE_NAME];if(null!=e&&0<e.length)return e}},{key:"getSdkVersion",value:function(e){e=e.params[$998a675d5a5ea461$export$bf20daeb966b534e.PARAM_SDK_VERSION];if(null!=e&&"string"==typeof e)return e}}]),e})(),$f15c9e9bb6705518$export$b34519776a78fd3b=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,null,[{key:"isKlarnaApp",value:function(e,t){e=this.getPackageName(e,t);return null!=e?this.isKlarnaAppPackageName(e):this.isKlarnaAppUserAgent()}},{key:"getPackageName",value:function(e,t){if(t.action===$3e97667694aebf08$export$9d82dedbeb797f41.handshakeResponse){t=$1f46c59d7e48c823$export$a0e918d51eb9fb6.getAppPackageName(t);if(null!=t)return t}t=$86c5e230eba4f632$export$d2ca453b913dcdea.getFirstHandshakeResponseParams(e);return null!=t?this.getPackageNameFromHandshakeResponseParams(t):null}},{key:"getPackageNameFromHandshakeResponseParams",value:function(e){if(null!=e){e=e[$998a675d5a5ea461$export$bf20daeb966b534e.PARAM_APP_PACKAGE_NAME];if(null!=e&&0<e.length)return e}return null}},{key:"isKlarnaAppPackageName",value:function(e){return this.KLAPP_PACKAGE_NAMES.has(e)}},{key:"isKlarnaAppUserAgent",value:function(){var e=window.navigator.userAgent;return/Klarna\/\d{2}\.\d{2}\.\d+$/.test(e)}}]),e})(),$9e01429a994c7e94$export$bdb0fa2261d7dee1=($f15c9e9bb6705518$export$b34519776a78fd3b.KLAPP_PACKAGE_NAMES=new Set(["net.klarna.app.dev","com.klarna","net.klarna.app.oneoff","net.klarna.app.staging","net.klarna.app.yellow","net.klarna.app.internalpink","com.myklarnamobile","com.klarna.app"]),(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,null,[{key:"find",value:function(e,t,a){if(!(null!==e&&e instanceof Array))throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");if(void 0!==Array.prototype.find)return e.find(t,a);for(var r=Object(e),o=r.length>>>0,n=0;n<o;n++){var d=r[n];if(t.call(a,d,n,r))return d}}},{key:"includes",value:function(e,t,a){return void 0!==this.find(e,t,a)}}]),e})()),$7f4b0f31d58c057b$export$87771473bd972ac0=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){var a;$f15c9e9bb6705518$export$b34519776a78fd3b.isKlarnaApp(e,t)&&t.action===$3e97667694aebf08$export$9d82dedbeb797f41.handshakeResponse&&null!=(e=$1f46c59d7e48c823$export$a0e918d51eb9fb6.getFeatures(t))&&$9e01429a994c7e94$export$bdb0fa2261d7dee1.includes(e,function(e){return e===$998a675d5a5ea461$export$bf20daeb966b534e.FEATURE_AUTHENTICATION_BROWSER})&&(a=e.indexOf($998a675d5a5ea461$export$bf20daeb966b534e.FEATURE_AUTHENTICATION_BROWSER),e.splice(a,1),t.params[$998a675d5a5ea461$export$bf20daeb966b534e.PARAM_FEATURES]=JSON.stringify(e))}}]),e})(),$45ef9f7a5f2771f2$export$69840fdd0baf7472=(()=>{function a(){$cd80bf694d0631b1$export$71511d61b312f219(this,a)}return $62cc9eefa616c344$export$71511d61b312f219(a,[{key:"processMessage",value:function(e,t){var a;this.shouldOverrideReturnUrl(t)&&null!=(a=$1f46c59d7e48c823$export$a0e918d51eb9fb6.getAppPackageName(t))&&0<a.length&&(t.params[$998a675d5a5ea461$export$bf20daeb966b534e.PARAM_APP_RETURN_URL]=this.createDefaultReturnUrl(a))}},{key:"shouldOverrideReturnUrl",value:function(e){var t;return e.action===$3e97667694aebf08$export$9d82dedbeb797f41.handshakeResponse&&$1f46c59d7e48c823$export$a0e918d51eb9fb6.getPlatform(e)===$eb00602d8ed812b0$export$2dffd0b5373a4389.ANDROID&&!(null==(t=$1f46c59d7e48c823$export$a0e918d51eb9fb6.compareSdkVersion(e,a.DEFAULT_RETURN_URL_SDK_MIN_VERSION))||t<0||null==(t=$1f46c59d7e48c823$export$a0e918d51eb9fb6.compareSdkVersion(e,a.DEFAULT_RETURN_URL_SDK_MAX_VERSION))||0<=t)}},{key:"createDefaultReturnUrl",value:function(e){return"".concat(a.DEFAULT_RETURN_URL_SCHEME,"://").concat(e)}}]),a})(),$af2a197b0dc9b6ac$export$2cabd05dec5a966a=($45ef9f7a5f2771f2$export$69840fdd0baf7472.DEFAULT_RETURN_URL_SDK_MIN_VERSION="2.7.0",$45ef9f7a5f2771f2$export$69840fdd0baf7472.DEFAULT_RETURN_URL_SDK_MAX_VERSION="99.0.0",$45ef9f7a5f2771f2$export$69840fdd0baf7472.DEFAULT_RETURN_URL_SCHEME="klarna-mobile-sdk-return",(()=>{function t(e){$cd80bf694d0631b1$export$71511d61b312f219(this,t),this.nativeMessageSender=new $85771519b3f11699$export$15f59c3f623e5e81,this.componentMessageSender=new $9524e81dfe28183b$export$2cdde459a873087f,this.messageProcessors=[],this.dependencyContainer=e,this.messageProcessors.push(new $4814da207725bbf9$export$b11de1d3f90d3095,new $ef3b0819d68510c9$export$9e75f50bdaecb36d,new $3a048628b2890696$export$eed1627e80a5b594,new $ecbd5ca65160a7bb$export$b385821f0f78b939,new $20b9286aec418fd6$export$d2210066b6438afd,new $7fa6dffb869bcbcd$export$c7c9b199d5b7287c,new $c8630f9c56e73faf$export$c19720cc6ee85749,new $7dd74269339ff428$export$1f3054e84aa43db(this.dependencyContainer),new $410c5ad4959c6c66$export$8ff363454ccde046(this.dependencyContainer),new $85625f7385c30624$export$6ca93f9fa6e2bc8c,new $5dbc9bfda17936fb$export$56219e84366399f9,new $7f4b0f31d58c057b$export$87771473bd972ac0,new $45ef9f7a5f2771f2$export$69840fdd0baf7472)}return $62cc9eefa616c344$export$71511d61b312f219(t,[{key:"postMessage",value:function(e,t,a){this.processMessage(e,t),(!a||t.receiver===$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native?this.nativeMessageSender:this.componentMessageSender).sendMessage(e,t)}},{key:"processMessage",value:function(t,a){this.messageProcessors.forEach(function(e){e.processMessage(t,a)})}},{key:"postEventMessageToNative",value:function(e,t){this.nativeMessageSender.postEventMessageToNative(e,t)}},{key:"postMessageToComponents",value:function(e,t){this.componentMessageSender.postMessageToComponents(e,t)}}]),t})()),$4fd8e36a662dd81b$export$d1b1e53e547a4664=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this._isSdkWebView=!1}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"isNativeReady",value:function(e){return e.nativeReady}},{key:"isNativeReadyAsync",value:function(o){return o.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?new Promise(function(e){return e(o.isNativeReady())}):new Promise(function(t,e){var a=window.setTimeout(function(){e("CrossWindowMessage Response Timeout")},3e3),r=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyRequest,null);o.crossWindowController.postMessage(r,function(e){return e.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyResponse&&(e=e.data,window.clearTimeout(a),t(e.isNativeReady)),!1})})}},{key:"isSdkWebView",value:function(e){var t,a;return(t=null!=this.getNativeMessageHandler())!=this._isSdkWebView&&(e.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?(a=new $976c9715c78f6b69$export$15f24e2438b5a10d(t),a=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewResponse,a),e.crossWindowController.postMessage(a),this._isSdkWebView=t):t&&(this._isSdkWebView=t)),this._isSdkWebView}},{key:"isSdkWebViewAsync",value:function(o){var n=this;return o.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?new Promise(function(e){return e(n.isSdkWebView(o))}):new Promise(function(t,e){var a=window.setTimeout(function(){e("CrossWindowMessage Response Timeout")},3e3),r=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewRequest,null);o.crossWindowController.postMessage(r,function(e){return e.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewResponse&&(e=e.data,n._isSdkWebView=e.isSdkWebView,window.clearTimeout(a),t(e.isSdkWebView)),!1})})}},{key:"setNativeReady",value:function(e){if(e.nativeReady)e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.MessageBridgeAlreadyRunning,null,null,null)),e.notifyEvent({name:"NativeHookAlreadyReady",payload:{receivers:e.receivers.toString(),queuedMessages:e.queuedMessages.toString()}});else{e.nativeReady=!0,e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.MessageBridgeWillStart,null,null,null));var t=!0,a=!1,r=void 0;try{for(var o,n=e.receivers.filter(function(e){return!e.registeredNatively})[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var d=o.value;e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.ReceiverAdded,d.name,null,null)),d.registeredNatively=!0}}catch(e){a=!0,r=e}finally{try{t||null==n.return||n.return()}finally{if(a)throw r}}var c=!0,a=!1,r=void 0;try{for(var s,i=e.queuedMessages[Symbol.iterator]();!(c=(s=i.next()).done);c=!0){var f=s.value;e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.MessagePosted,null,f,null))}}catch(e){a=!0,r=e}finally{try{c||null==i.return||i.return()}finally{if(a)throw r}}e.queuedMessages=[],e.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root&&(a=new $24815a6cb6024ef5$export$a9cf52565e7ce5db(e.nativeReady),r=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyResponse,a),e.crossWindowController.postMessage(r)),e.notifyEvent({name:"NativeHookReady",payload:{receivers:e.receivers.toString(),queuedMessages:e.queuedMessages.toString()}})}}},{key:"setIsSdkWebView",value:function(e){this._isSdkWebView=e}},{key:"getNativeMessageHandler",value:function(){return e.getNativeMessageHandler()}}]),e})(),$0cdf7169dbc5007b$export$59e2a0f060df91e7=($4fd8e36a662dd81b$export$d1b1e53e547a4664.getNativeMessageHandler=function(){var e;return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.KlarnaNativeHookMessageHandler?e=window.webkit.messageHandlers.KlarnaNativeHookMessageHandler:window.KlarnaNativeHookMessageHandler&&(e=window.KlarnaNativeHookMessageHandler),e},function e(t,a){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.registeredNatively=!1,this.id=$86c5e230eba4f632$export$d2ca453b913dcdea.createUUIDv4(),this.name=t,this.callback=a}),$9e8cdbfcf67b38ba$export$fb16809fa2eec8fa=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"addReceiver",value:function(e,t,a){t=new $0cdf7169dbc5007b$export$59e2a0f060df91e7(t,a);e.nativeReady&&(e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.ReceiverAdded,t.name,null,null)),t.registeredNatively=!0),e.receivers.push(t)}},{key:"removeReceiver",value:function(e,t,a){e.receivers=e.receivers.filter(function(e){return e.name!==t&&e.callback!==a}),e.nativeReady&&e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.ReceiverRemoved,t,null,null))}}]),e})();function $d4d656c304fff6fc$var$asyncGeneratorStep(e,t,a,r,o,n,d){try{var c=e[n](d),s=c.value}catch(e){return void a(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function $d4d656c304fff6fc$export$71511d61b312f219(c){return function(){var e=this,d=arguments;return new Promise(function(t,a){var r=c.apply(e,d);function o(e){$d4d656c304fff6fc$var$asyncGeneratorStep(r,t,a,o,n,"next",e)}function n(e){$d4d656c304fff6fc$var$asyncGeneratorStep(r,t,a,o,n,"throw",e)}o(void 0)})}}function $96ee01e75e552cac$export$71511d61b312f219(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var $e04810f8dbeb1928$var$extendStatics=function(e,t){return($e04810f8dbeb1928$var$extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}))(e,t)};function $e04810f8dbeb1928$export$a8ba968b8961cb8a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}$e04810f8dbeb1928$var$extendStatics(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}var $e04810f8dbeb1928$export$18ce0697a983be9b=function(){return($e04810f8dbeb1928$export$18ce0697a983be9b=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function $e04810f8dbeb1928$export$3c9a16f847548506(e,t){var a={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(a[o[r]]=e[o[r]]);return a}function $e04810f8dbeb1928$export$29e00dfd3077644b(e,t,a,r){var o,n=arguments.length,d=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"===("undefined"==typeof Reflect?"undefined":$96ee01e75e552cac$export$71511d61b312f219(Reflect))&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,a,r);else for(var c=e.length-1;0<=c;c--)(o=e[c])&&(d=(n<3?o(d):3<n?o(t,a,d):o(t,a))||d);return 3<n&&d&&Object.defineProperty(t,a,d),d}function $e04810f8dbeb1928$export$d5ad3fd78186038f(a,r){return function(e,t){r(e,t,a)}}function $e04810f8dbeb1928$export$3a84e1ae4e97e9b0(e,t,a,r,o,n){function d(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var c,s=r.kind,i="getter"===s?"get":"setter"===s?"set":"value",e=!t&&e?r.static?e:e.prototype:null,f=t||(e?Object.getOwnPropertyDescriptor(e,r.name):{}),$=!1,b=a.length-1;0<=b;b--){var l,p={};for(l in r)p[l]="access"===l?{}:r[l];for(l in r.access)p.access[l]=r.access[l];p.addInitializer=function(e){if($)throw new TypeError("Cannot add initializers after decoration has completed");n.push(d(e||null))};var u=(0,a[b])("accessor"===s?{get:f.get,set:f.set}:f[i],p);if("accessor"===s){if(void 0!==u){if(null===u||"object"!==(void 0===u?"undefined":$96ee01e75e552cac$export$71511d61b312f219(u)))throw new TypeError("Object expected");(c=d(u.get))&&(f.get=c),(c=d(u.set))&&(f.set=c),(c=d(u.init))&&o.unshift(c)}}else(c=d(u))&&("field"===s?o.unshift(c):f[i]=c)}e&&Object.defineProperty(e,r.name,f),$=!0}function $e04810f8dbeb1928$export$d831c04e792af3d(e,t,a){for(var r=2<arguments.length,o=0;o<t.length;o++)a=r?t[o].call(e,a):t[o].call(e);return r?a:void 0}function $e04810f8dbeb1928$export$6a2a36740a146cb8(e){return"symbol"===(void 0===e?"undefined":$96ee01e75e552cac$export$71511d61b312f219(e))?e:"".concat(e)}function $e04810f8dbeb1928$export$d1a06452d3489bc7(e,t,a){return"symbol"===(void 0===t?"undefined":$96ee01e75e552cac$export$71511d61b312f219(t))&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:a?"".concat(a," ",t):t})}function $e04810f8dbeb1928$export$f1db080c865becb9(e,t){if("object"===("undefined"==typeof Reflect?"undefined":$96ee01e75e552cac$export$71511d61b312f219(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function $e04810f8dbeb1928$export$1050f835b63b671e(e,d,c,s){return new(c=c||Promise)(function(a,t){function r(e){try{n(s.next(e))}catch(e){t(e)}}function o(e){try{n(s.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?a(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,o)}n((s=s.apply(e,d||[])).next())})}function $e04810f8dbeb1928$export$67ebef60e6f28a6(r,o){var n,d,c,s={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=e(0),i.throw=e(1),i.return=e(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function e(a){return function(e){var t=[a,e];if(n)throw new TypeError("Generator is already executing.");for(;s=i&&t[i=0]?0:s;)try{if(n=1,d&&(c=2&t[0]?d.return:t[0]?d.throw||((c=d.return)&&c.call(d),0):d.next)&&!(c=c.call(d,t[1])).done)return c;switch(d=0,(t=c?[2&t[0],c.value]:t)[0]){case 0:case 1:c=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,d=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(c=0<(c=s.trys).length&&c[c.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!c||t[1]>c[0]&&t[1]<c[3]))s.label=t[1];else if(6===t[0]&&s.label<c[1])s.label=c[1],c=t;else{if(!(c&&s.label<c[2])){c[2]&&s.ops.pop(),s.trys.pop();continue}s.label=c[2],s.ops.push(t)}}t=o.call(r,s)}catch(e){t=[6,e],d=0}finally{n=c=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}var $e04810f8dbeb1928$export$45d3717a4c69092e=Object.create?function(e,t,a,r){void 0===r&&(r=a);var o=Object.getOwnPropertyDescriptor(t,a);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,r,o)}:function(e,t,a,r){e[r=void 0===r?a:r]=t[a]};function $e04810f8dbeb1928$export$f33643c0debef087(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||$e04810f8dbeb1928$export$45d3717a4c69092e(t,e,a)}function $e04810f8dbeb1928$export$19a8beecd37a4c45(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],r=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $e04810f8dbeb1928$export$8d051b38c9118094(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,o,n=a.call(e),d=[];try{for(;(void 0===t||0<t--)&&!(r=n.next()).done;)d.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(o)throw o.error}}return d}function $e04810f8dbeb1928$export$afc72e2116322959(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat($e04810f8dbeb1928$export$8d051b38c9118094(arguments[t]));return e}function $e04810f8dbeb1928$export$6388937ca91ccae8(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<a;t++)for(var n=arguments[t],d=0,c=n.length;d<c;d++,o++)r[o]=n[d];return r}function $e04810f8dbeb1928$export$1216008129fb82ed(e,t,a){if(a||2===arguments.length)for(var r,o=0,n=t.length;o<n;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function $e04810f8dbeb1928$export$10c90e4f7922046c(e){return this instanceof $e04810f8dbeb1928$export$10c90e4f7922046c?(this.v=e,this):new $e04810f8dbeb1928$export$10c90e4f7922046c(e)}function $e04810f8dbeb1928$export$e427f37a30a4de9b(e,t,a){var o,n,d;if(Symbol.asyncIterator)return o=a.apply(e,t||[]),n=[],d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),r("next"),r("throw"),r("return",function(t){return function(e){return Promise.resolve(e).then(t,i)}}),d[Symbol.asyncIterator]=function(){return this},d;throw new TypeError("Symbol.asyncIterator is not defined.");function r(r,e){o[r]&&(d[r]=function(a){return new Promise(function(e,t){1<n.push([r,a,e,t])||c(r,a)})},e)&&(d[r]=e(d[r]))}function c(e,t){try{(a=o[e](t)).value instanceof $e04810f8dbeb1928$export$10c90e4f7922046c?Promise.resolve(a.value.v).then(s,i):f(n[0][2],a)}catch(e){f(n[0][3],e)}var a}function s(e){c("next",e)}function i(e){c("throw",e)}function f(e,t){e(t),n.shift(),n.length&&c(n[0][0],n[0][1])}}function $e04810f8dbeb1928$export$bbd80228419bb833(r){var o,e={};return t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,a){e[t]=r[t]?function(e){return(o=!o)?{value:$e04810f8dbeb1928$export$10c90e4f7922046c(r[t](e)),done:!1}:a?a(e):e}:a}}function $e04810f8dbeb1928$export$e3b29a3d6162315f(d){var e,t;if(Symbol.asyncIterator)return(e=d[Symbol.asyncIterator])?e.call(d):(d="function"==typeof $e04810f8dbeb1928$export$19a8beecd37a4c45?$e04810f8dbeb1928$export$19a8beecd37a4c45(d):d[Symbol.iterator](),t={},a("next"),a("throw"),a("return"),t[Symbol.asyncIterator]=function(){return this},t);throw new TypeError("Symbol.asyncIterator is not defined.");function a(n){t[n]=d[n]&&function(o){return new Promise(function(e,t){var a,r;o=d[n](o),a=e,e=t,r=o.done,t=o.value,Promise.resolve(t).then(function(e){a({value:e,done:r})},e)})}}}function $e04810f8dbeb1928$export$4fb47efe1390b86f(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var $e04810f8dbeb1928$var$__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},$e04810f8dbeb1928$var$ownKeys=function(e){return($e04810f8dbeb1928$var$ownKeys=Object.getOwnPropertyNames||function(e){var t,a=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[a.length]=t);return a})(e)};function $e04810f8dbeb1928$export$c21735bcef00d192(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=$e04810f8dbeb1928$var$ownKeys(e),r=0;r<a.length;r++)"default"!==a[r]&&$e04810f8dbeb1928$export$45d3717a4c69092e(t,e,a[r]);return $e04810f8dbeb1928$var$__setModuleDefault(t,e),t}function $e04810f8dbeb1928$export$da59b14a69baef04(e){return e&&e.__esModule?e:{default:e}}function $e04810f8dbeb1928$export$d5dcaf168c640c35(e,t,a,r){if("a"===a&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e===t&&r:t.has(e))return"m"===a?r:"a"===a?r.call(e):r?r.value:t.get(e);throw new TypeError("Cannot read private member from an object whose class did not declare it")}function $e04810f8dbeb1928$export$d40a35129aaff81f(e,t,a,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e===t&&o:t.has(e))return"a"===r?o.call(e,a):o?o.value=a:t.set(e,a),a;throw new TypeError("Cannot write private member to an object whose class did not declare it")}function $e04810f8dbeb1928$export$81fdc39f203e4e04(e,t){if(null===t||"object"!==(void 0===t?"undefined":$96ee01e75e552cac$export$71511d61b312f219(t))&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function $e04810f8dbeb1928$export$88ac25d8e944e405(e,t,a){if(null!=t){if("object"!==(void 0===t?"undefined":$96ee01e75e552cac$export$71511d61b312f219(t))&&"function"!=typeof t)throw new TypeError("Object expected.");var r,o;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],a&&(o=r)}if("function"!=typeof r)throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:a})}else a&&e.stack.push({async:!0});return t}var $e04810f8dbeb1928$var$_SuppressedError="function"==typeof SuppressedError?SuppressedError:function(e,t,a){a=new Error(a);return a.name="SuppressedError",a.error=e,a.suppressed=t,a};function $e04810f8dbeb1928$export$8f076105dc360e92(a){function r(e){a.error=a.hasError?new $e04810f8dbeb1928$var$_SuppressedError(e,a.error,"An error was suppressed during disposal."):e,a.hasError=!0}var o,n=0;return function t(){for(;o=a.stack.pop();)try{if(!o.async&&1===n)return n=0,a.stack.push(o),Promise.resolve().then(t);if(o.dispose){var e=o.dispose.call(o.value);if(o.async)return n|=2,Promise.resolve(e).then(t,function(e){return r(e),t()})}else n|=1}catch(e){r(e)}if(1===n)return a.hasError?Promise.reject(a.error):Promise.resolve();if(a.hasError)throw a.error}()}function $e04810f8dbeb1928$export$889dfb5d17574b0b(e,n){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,t,a,r,o){return t?n?".jsx":".js":!a||r&&o?a+r+"."+o.toLowerCase()+"js":e}):e}var $e04810f8dbeb1928$export$2e2bcd8739ae039={__extends:$e04810f8dbeb1928$export$a8ba968b8961cb8a,__assign:$e04810f8dbeb1928$export$18ce0697a983be9b,__rest:$e04810f8dbeb1928$export$3c9a16f847548506,__decorate:$e04810f8dbeb1928$export$29e00dfd3077644b,__param:$e04810f8dbeb1928$export$d5ad3fd78186038f,__esDecorate:$e04810f8dbeb1928$export$3a84e1ae4e97e9b0,__runInitializers:$e04810f8dbeb1928$export$d831c04e792af3d,__propKey:$e04810f8dbeb1928$export$6a2a36740a146cb8,__setFunctionName:$e04810f8dbeb1928$export$d1a06452d3489bc7,__metadata:$e04810f8dbeb1928$export$f1db080c865becb9,__awaiter:$e04810f8dbeb1928$export$1050f835b63b671e,__generator:$e04810f8dbeb1928$export$67ebef60e6f28a6,__createBinding:$e04810f8dbeb1928$export$45d3717a4c69092e,__exportStar:$e04810f8dbeb1928$export$f33643c0debef087,__values:$e04810f8dbeb1928$export$19a8beecd37a4c45,__read:$e04810f8dbeb1928$export$8d051b38c9118094,__spread:$e04810f8dbeb1928$export$afc72e2116322959,__spreadArrays:$e04810f8dbeb1928$export$6388937ca91ccae8,__spreadArray:$e04810f8dbeb1928$export$1216008129fb82ed,__await:$e04810f8dbeb1928$export$10c90e4f7922046c,__asyncGenerator:$e04810f8dbeb1928$export$e427f37a30a4de9b,__asyncDelegator:$e04810f8dbeb1928$export$bbd80228419bb833,__asyncValues:$e04810f8dbeb1928$export$e3b29a3d6162315f,__makeTemplateObject:$e04810f8dbeb1928$export$4fb47efe1390b86f,__importStar:$e04810f8dbeb1928$export$c21735bcef00d192,__importDefault:$e04810f8dbeb1928$export$da59b14a69baef04,__classPrivateFieldGet:$e04810f8dbeb1928$export$d5dcaf168c640c35,__classPrivateFieldSet:$e04810f8dbeb1928$export$d40a35129aaff81f,__classPrivateFieldIn:$e04810f8dbeb1928$export$81fdc39f203e4e04,__addDisposableResource:$e04810f8dbeb1928$export$88ac25d8e944e405,__disposeResources:$e04810f8dbeb1928$export$8f076105dc360e92,__rewriteRelativeImportExtension:$e04810f8dbeb1928$export$889dfb5d17574b0b};function $dc0cb7d118b5c913$export$71511d61b312f219(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var $cc99dcb756399fbf$export$2e2bcd8739ae039={create:function(e,t){(new e.Image).src=t}},$ad4a494ee18bd328$export$2e2bcd8739ae039={create:function(e,t,a){e.navigator.sendBeacon(t,JSON.stringify(a))}},$026025f77c2d7e42$exports={},$026025f77c2d7e42$export$61b49a5ae59d663=($parcel$export($026025f77c2d7e42$exports,"ALL",function(){return $026025f77c2d7e42$export$61b49a5ae59d663}),$parcel$export($026025f77c2d7e42$exports,"TRACE",function(){return $026025f77c2d7e42$export$8754b71dc67cd5d0}),$parcel$export($026025f77c2d7e42$exports,"DEBUG",function(){return $026025f77c2d7e42$export$3f32c2013f0dcc1e}),$parcel$export($026025f77c2d7e42$exports,"INFO",function(){return $026025f77c2d7e42$export$7ecad81ba40c4d73}),$parcel$export($026025f77c2d7e42$exports,"WARN",function(){return $026025f77c2d7e42$export$1bb2bb898824f628}),$parcel$export($026025f77c2d7e42$exports,"ERROR",function(){return $026025f77c2d7e42$export$103bedf43ba882db}),$parcel$export($026025f77c2d7e42$exports,"FATAL",function(){return $026025f77c2d7e42$export$92a7009ed4a42216}),$parcel$export($026025f77c2d7e42$exports,"OFF",function(){return $026025f77c2d7e42$export$173de64b5ad0d5b4}),0),$026025f77c2d7e42$export$8754b71dc67cd5d0=0,$026025f77c2d7e42$export$3f32c2013f0dcc1e=1,$026025f77c2d7e42$export$7ecad81ba40c4d73=2,$026025f77c2d7e42$export$1bb2bb898824f628=3,$026025f77c2d7e42$export$103bedf43ba882db=4,$026025f77c2d7e42$export$92a7009ed4a42216=5,$026025f77c2d7e42$export$173de64b5ad0d5b4=6,$2c150599ea49b34a$var$_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$2c150599ea49b34a$var$_typeof="function"==typeof Symbol&&"symbol"===$96ee01e75e552cac$export$71511d61b312f219(Symbol.iterator)?function(e){return void 0===e?"undefined":$96ee01e75e552cac$export$71511d61b312f219(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":$96ee01e75e552cac$export$71511d61b312f219(e)},$2c150599ea49b34a$var$API_PATH="/v1/";function $2c150599ea49b34a$export$2e2bcd8739ae039(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;if("object"!==(void 0===e?"undefined":$2c150599ea49b34a$var$_typeof(e))||!e)throw new TypeError("expected configuration object");var t=e.baseUrl,n=void 0===t?"https://eu.klarnaevt.com":t,d=e.client,c=e.clientVersion,s=e.sessionId,t=e.commonData,i=void 0===t?{}:t,t=e.instanceId,f=void 0===t?Math.floor(9e3*Math.random())+1e3:t,$=e.logLevel||$026025f77c2d7e42$export$61b49a5ae59d663;if("string"!=typeof d)throw new TypeError("expected `client` in the configuration object");if("string"!=typeof c)throw new TypeError("expected `clientVersion` in the configuration object");if("string"!=typeof s)throw new TypeError("expected `sessionId` in the configuration object");if("number"!=typeof $||$<$026025f77c2d7e42$export$61b49a5ae59d663||$026025f77c2d7e42$export$173de64b5ad0d5b4<$)throw new TypeError("invalid `logLevel` ("+$+")");function b(t){return Object.keys(t).sort().map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:$026025f77c2d7e42$export$61b49a5ae59d663;if(!(r<$)){if(!e)throw new TypeError("expected `name` as first parameter");t=$2c150599ea49b34a$var$_extends({},i,t,{iid:f,sid:s,timestamp:t.timestamp||(new Date).getTime()}),r=""+n+$2c150599ea49b34a$var$API_PATH+d+"/"+c+"/"+e+"?"+b(t);try{$ad4a494ee18bd328$export$2e2bcd8739ae039.create(o,r,a)}catch(e){a&&(r+="&"+b(a)),$cc99dcb756399fbf$export$2e2bcd8739ae039.create(o,r)}}}return{event:r,trace:function(e,t,a){r(e,t,a,$026025f77c2d7e42$export$8754b71dc67cd5d0)},debug:function(e,t,a){r(e,t,a,$026025f77c2d7e42$export$3f32c2013f0dcc1e)},info:function(e,t,a){r(e,t,a,$026025f77c2d7e42$export$7ecad81ba40c4d73)},warn:function(e,t,a){r(e,t,a,$026025f77c2d7e42$export$1bb2bb898824f628)},error:function(e,t,a){r(e,t,a,$026025f77c2d7e42$export$103bedf43ba882db)},fatal:function(e,t,a){r(e,t,a,$026025f77c2d7e42$export$92a7009ed4a42216)},setLogLevel:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$026025f77c2d7e42$export$61b49a5ae59d663;if("number"!=typeof e||e<$026025f77c2d7e42$export$61b49a5ae59d663||$026025f77c2d7e42$export$173de64b5ad0d5b4<e)throw new TypeError("invalid `logLevel` ("+e+")");$=e},getConfig:function(){return{baseUrl:n,client:d,clientVersion:c,sessionId:s,instanceId:f,logLevel:$}}}}var $06309653d01c5828$var$_obj,$06309653d01c5828$export$87e5888863658dcc=(e=>(e[e.ALL=0]="ALL",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.FATAL=5]="FATAL",e[e.OFF=6]="OFF",e))({}),$06309653d01c5828$export$26ac5bc6e09a3af6=($dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj={},0,$026025f77c2d7e42$exports.ALL),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,1,$026025f77c2d7e42$exports.DEBUG),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,2,$026025f77c2d7e42$exports.INFO),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,3,$026025f77c2d7e42$exports.WARN),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,4,$026025f77c2d7e42$exports.ERROR),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,5,$026025f77c2d7e42$exports.FATAL),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,6,$026025f77c2d7e42$exports.OFF),$06309653d01c5828$var$_obj),$6e4e8de703391db2$export$e01a0ce8cd4b690a=(()=>{function a(e,t){$cd80bf694d0631b1$export$71511d61b312f219(this,a),this._logLevel=$06309653d01c5828$export$87e5888863658dcc.ERROR,this.logger=t,this.tracker=$2c150599ea49b34a$export$2e2bcd8739ae039({client:a.CLIENT_NAME,clientVersion:a.CLIENT_VERSION,sessionId:e,baseUrl:a.EVT_ENDPOINT,instanceId:$86c5e230eba4f632$export$d2ca453b913dcdea.randomizeInteger().toString(),logLevel:$06309653d01c5828$export$26ac5bc6e09a3af6[this._logLevel]})}return $62cc9eefa616c344$export$71511d61b312f219(a,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){this._logLevel=e,this.tracker.setLogLevel($06309653d01c5828$export$26ac5bc6e09a3af6[e])}},{key:"logEvent",value:function(t){var a=this;return $d4d656c304fff6fc$export$71511d61b312f219(function(){return $e04810f8dbeb1928$export$67ebef60e6f28a6(this,function(e){return[2,a.logEventInternal(t)]})})()}},{key:"logEventInternal",value:function(a){var r=this;return $d4d656c304fff6fc$export$71511d61b312f219(function(){return $e04810f8dbeb1928$export$67ebef60e6f28a6(this,function(e){return[2,new Promise(function(t){try{r.logger.debug("Logging event: ".concat(a.name," - ").concat(a.level)),r.tracker.event(a.name,void 0,a.payload,$06309653d01c5828$export$26ac5bc6e09a3af6[a.level]),r.logger.debug("Successfully logged event (".concat(a.name,").")),t()}catch(e){r.logger.error("Failed to log event (".concat(a.name,")"),e),t()}})]})})()}}]),a})(),$9ecb142aad0a6028$export$94c0504e844c22d2=($6e4e8de703391db2$export$e01a0ce8cd4b690a.CLIENT_NAME="mobile-sdk-message-bridge",$6e4e8de703391db2$export$e01a0ce8cd4b690a.CLIENT_VERSION=$e46f7c82eed16cd3$export$3ab5d4b363e83ecc,$6e4e8de703391db2$export$e01a0ce8cd4b690a.EVT_ENDPOINT=$e46f7c82eed16cd3$export$6f861d09917a31b9,(()=>{function a(){$cd80bf694d0631b1$export$71511d61b312f219(this,a),this.nativeReady=!1,this.receivers=[],this.queuedMessages=[],this.queuedKlarnaPaymentsMessages=[],this.version=$e46f7c82eed16cd3$export$3ab5d4b363e83ecc,this.eventListeners=[],this.handshakeResponseParamsMap={},this.base64Controller=new $ab11a08eff1af618$export$3b418aac0e066580,this.crossWindowController=new $4056916c3e7cc48b$export$8697e044b6ceac7e(this),this.nativeController=new $4fd8e36a662dd81b$export$d1b1e53e547a4664,this.receiverController=new $9e8cdbfcf67b38ba$export$fb16809fa2eec8fa;var e=$86c5e230eba4f632$export$d2ca453b913dcdea.createUUIDv4(),t=new $dc2b35112bcce9e2$export$efa9a398d6368992;this.dependencyContainer={sessionId:e,logger:t,analyticsController:new $6e4e8de703391db2$export$e01a0ce8cd4b690a(e,t)},this.base64Controller.overrideDefaults(),this.setupCrossWindowController(),this.messageController=new $af2a197b0dc9b6ac$export$2cabd05dec5a966a(this.dependencyContainer)}return $62cc9eefa616c344$export$71511d61b312f219(a,[{key:"addReceiver",value:function(t,e){try{this.receiverController.addReceiver(this,t,e),this.notifyEvent({name:"AddedReceiver",payload:{name:t}})}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.addReceiver failed.",e),this.notifyEvent({name:"AddReceiverFailed",payload:{name:t,error:e.toString()}})}}},{key:"removeReceiver",value:function(t,e){try{this.receiverController.removeReceiver(this,t,e),this.notifyEvent({name:"RemovedReceiver",payload:{name:t}})}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.removeReceiver failed.",e),this.notifyEvent({name:"RemoveReceiverFailed",payload:{name:t,error:e.toString()}})}}},{key:"postMessage",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{this.messageController.postMessage(this,t,e),e&&t.sender!==$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native&&$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("MessageBridge.postMessage native forwarded message from component to another component.",t)}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.postMessage failed.",e),this.notifyEvent({name:"PostMessageFailed",payload:{action:t.action,sender:t.sender,receiver:t.receiver,error:e.toString()}})}}},{key:"isNativeReady",value:function(){return this.nativeController.isNativeReady(this)}},{key:"isNativeReadyAsync",value:function(){return this.nativeController.isNativeReadyAsync(this)}},{key:"setNativeReady",value:function(){try{this.nativeController.setNativeReady(this),this.reportEndpoints()}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.setNativeReady failed.",e),this.notifyEvent({name:"NativeHookSetNativeReadyFailed",payload:{receivers:this.receivers.toString(),queuedMessages:this.queuedMessages.toString(),error:e.toString()}})}}},{key:"inSdkWebView",value:function(){try{return this.nativeController.isSdkWebView(this)}catch(e){return $dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.inSdkWebView failed.",e),!1}}},{key:"inSdkWebViewAsync",value:function(){return this.nativeController.isSdkWebViewAsync(this)}},{key:"addEventListener",value:function(e){this.eventListeners.indexOf(e)<=-1&&this.eventListeners.push(e)}},{key:"removeEventListener",value:function(t){this.eventListeners=this.eventListeners.filter(function(e){return e!=t})}},{key:"notifyEvent",value:function(t){this.eventListeners.forEach(function(e){return e(t)})}},{key:"compareVersion",value:function(e,t){try{return $86c5e230eba4f632$export$d2ca453b913dcdea.compareVersion(e,t)}catch(e){return $dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.compareVersion failed.",e),0}}},{key:"destroy",value:function(){this.teardownCrossWindowController()}},{key:"setupCrossWindowController",value:function(){var e;this.crossWindowController.register(this),this.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame?(e=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyRequest,null),this.crossWindowController.postMessage(e),e=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewRequest,null),this.crossWindowController.postMessage(e)):this.nativeController.isSdkWebView(this),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowController Setup")}},{key:"teardownCrossWindowController",value:function(){this.crossWindowController.unregister(),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowController Teardown")}},{key:"reportEndpoints",value:function(){var e=new $e27faf65630ebc9a$export$e12b769011d096b4(this.version,new $f12b5d7f8ad4b8dc$export$33b0bc6879c27206($a527415fb53b3e91$export$eed022e50baffed5.Analytics.Staging,$a527415fb53b3e91$export$eed022e50baffed5.Analytics.Production),new $f12b5d7f8ad4b8dc$export$33b0bc6879c27206($a527415fb53b3e91$export$eed022e50baffed5.DeviceData.Staging,$a527415fb53b3e91$export$eed022e50baffed5.DeviceData.Production));this.messageController.postEventMessageToNative(this,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.EndpointsReported,null,null,e))}}]),a})());try{null==window.__KlarnaNativeHook?window.__KlarnaNativeHook=new $9ecb142aad0a6028$export$94c0504e844c22d2:1===$86c5e230eba4f632$export$d2ca453b913dcdea.compareVersion($e46f7c82eed16cd3$export$3ab5d4b363e83ecc,window.__KlarnaNativeHook.version)&&$86c5e230eba4f632$export$d2ca453b913dcdea.replaceBridge(window.__KlarnaNativeHook,new $9ecb142aad0a6028$export$94c0504e844c22d2)}catch(e){console.error("__KlarnaNativeHook MessageBridge initialization failed.",e)}